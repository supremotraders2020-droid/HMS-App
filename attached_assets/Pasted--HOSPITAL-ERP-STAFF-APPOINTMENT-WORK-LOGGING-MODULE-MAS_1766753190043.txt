üöë HOSPITAL ERP ‚Äì STAFF APPOINTMENT & WORK LOGGING MODULE
üî• MASTER IMPLEMENTATION PROMPT FOR REPLIT
üß† CONTEXT (READ CAREFULLY)

You are working inside an existing Hospital Management System that already has:

Patient OPD / IPD

Doctor modules

Admin dashboard

Role-based access control (RBAC)

Authentication system

Audit logging

Billing & reports

You must ADD a new module without breaking existing features.

üéØ MODULE NAME

Staff Appointment, Roster, Work Logging & Performance Analytics Module

üéØ CORE GOAL

Build a secure, real-time, audit-ready staff management system that manages:

Staff roster & shift scheduling

Doctor appointment slots

Task & duty logging

Leave & overtime management

Performance tracking

Department-wise analytics

This module must integrate with existing hospital users, departments, OPD/IPD, billing & admin dashboards.

üîê ROLE-BASED ACCESS CONTROL (MANDATORY)

Use existing RBAC and extend it with:

Roles

SUPER_ADMIN

ADMIN

HR

DEPARTMENT_HEAD

DOCTOR

NURSE

STAFF

AUDITOR (read-only)

Access Rules

Staff can see only their own data

Department Heads can see only their department

HR sees attendance, leave, payroll

Admin sees everything

Auditors see read-only reports

NO public or external access

üß© MODULE BREAKDOWN (IMPLEMENT ALL)
1Ô∏è‚É£ STAFF MASTER PROFILE SYSTEM
Backend

Create staff_master table:

Fields

staff_id (UUID, primary key)

linked_user_id (existing user table)

employee_code (hospital-generated)

full_name

role

department_id

designation

qualifications

joining_date

employment_type (Full-time / Contract)

shift_type (Fixed / Rotational)

reporting_manager_id

status (Active / Leave / Suspended)

created_at

updated_at

2Ô∏è‚É£ STAFF ROSTER & SHIFT SCHEDULING ENGINE
Backend Logic

Create shift_roster table:

Fields

roster_id

staff_id

department_id

shift_date

shift_type (Morning / Evening / Night / On-Call)

start_time

end_time

assigned_by

override_reason (nullable)

created_at

Rules

No overlapping shifts

No staff on leave can be assigned

Night shift > 3 days ‚Üí warning

Emergency override allowed with audit log

Frontend

Calendar UI (weekly/monthly)

Drag-drop shift assignment

Conflict warnings

Color-coded shifts

3Ô∏è‚É£ DOCTOR APPOINTMENT SLOT MANAGEMENT
Backend

Create doctor_appointment_slots table:

Fields

slot_id

doctor_id

department_id

date

start_time

end_time

slot_type (OPD / IPD / Emergency)

max_patients

booked_count

status

Integration

Sync with patient booking system

Block slots during leave

Emergency buffer slots

4Ô∏è‚É£ TASK & DUTY LOGGING SYSTEM
Backend

Create task_logs table:

Fields

task_id

assigned_to_staff_id

assigned_by_user_id

department_id

task_type (Clinical / Admin / Emergency)

patient_id (nullable)

start_time

end_time

completion_status

remarks

proof_file_url (optional)

created_at

Rules

Auto-timestamp on start/end

Immutable logs after submission

Task linked to staff performance

5Ô∏è‚É£ ATTENDANCE, LEAVE & OVERTIME MANAGEMENT
Tables

attendance_logs

leave_requests

overtime_logs

Leave Workflow

Staff applies

Dept Head approves

HR final approval

Overtime Rules

Auto-calculate beyond scheduled hours

HR approval mandatory

Sync with payroll module

6Ô∏è‚É£ PERFORMANCE METRICS ENGINE
Create staff_performance_metrics table:

Metrics

attendance_percentage

task_completion_rate

patient_feedback_score

overtime_hours

shift_miss_count

response_time_avg

performance_score (AI-calculated)

Logic
performance_score =
(attendance * 0.25) +
(task_completion * 0.30) +
(patient_feedback * 0.20) +
(response_time * 0.15) -
(penalties * 0.10)

7Ô∏è‚É£ DEPARTMENT-WISE ANALYTICS DASHBOARD
Backend

Aggregated analytics APIs

Date & department filters

Frontend Visuals

Staff load heatmap

Shift coverage graph

Leave trends

Performance comparison

Cost vs productivity

üß† AI & AUTOMATION (OPTIONAL BUT PLANNED)

Auto-roster suggestions

Burnout risk detection

Understaffing alerts

High-performer tagging

üîê SECURITY & COMPLIANCE

RBAC enforced on every API

Encrypted sensitive fields

Audit logs for:

Shift overrides

Leave approvals

Overtime changes

NABH / ISO-ready reports

üîå API STRUCTURE (MUST FOLLOW)
/api/staff
/api/shifts
/api/appointments
/api/tasks
/api/attendance
/api/leave
/api/overtime
/api/performance
/api/analytics


All APIs must:

Validate role permissions

Log actions

Return structured JSON

üß™ TESTING REQUIREMENTS

Shift conflict testing

Leave abuse scenarios

High-load OPD testing

Role-based access testing

Payroll accuracy testing

üì¶ DEPLOYMENT REQUIREMENTS

Modular code (no monolith)

Environment-based configs

Scalable for multi-hospital future

No breaking changes to existing modules

‚úÖ FINAL OUTPUT EXPECTED

Fully working Staff Management Module

Integrated dashboards

Secure access

Audit-ready logs

AI-ready metrics